name: Update ClickUp

on:
  push:
    branches: [ main, develop ]
  pull_request:
    types: [ opened, closed, merged ]
  issues:
    types: [ opened, closed ]

jobs:
  update-clickup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Update ClickUp
        run: |
          # Obtener informaci√≥n del evento
          EVENT_TYPE="${{ github.event_name }}"
          REPO="${{ github.repository }}"
          ACTOR="${{ github.actor }}"
          
          # Crear tarea en ClickUp
          curl -X POST "https://api.clickup.com/api/v2/list/YOUR_LIST_ID/task" \
            -H "Content-Type: application/json" \
            -H "Authorization: 49ANTM8Q6AWCA372BX9XCPIT22XGGPCT" \
            -d '{
              "name": "GitHub: '$EVENT_TYPE' by '$ACTOR'",
              "description": "Repository: '$REPO'\nEvent: '$EVENT_TYPE'\nActor: '$ACTOR'",
              "status": "to do",
              "tags": ["github", "'$EVENT_TYPE'"]
            }'